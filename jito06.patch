From 10e8d47e6005a46ee54324a1f552ce889e9a8e48 Mon Sep 17 00:00:00 2001
From: Jed <4679729+jedleggett@users.noreply.github.com>
Date: Fri, 2 Aug 2024 14:17:03 -0500
Subject: [PATCH] add packet flag for from staked sender

---
 core/benches/proto_to_packet.rs | 1 +
 core/src/lib.rs                 | 6 ++++++
 jito-protos/protos              | 2 +-
 3 files changed, 8 insertions(+), 1 deletion(-)

diff --git a/core/benches/proto_to_packet.rs b/core/benches/proto_to_packet.rs
index 87f85f9c7f..a4ef4f8307 100644
--- a/core/benches/proto_to_packet.rs
+++ b/core/benches/proto_to_packet.rs
@@ -25,6 +25,7 @@ fn get_proto_packet(i: u8) -> PbPacket {
                 repair: false,
                 simple_vote_tx: false,
                 tracer_packet: false,
+                from_staked_node: false
             }),
             sender_stake: 0,
         }),
diff --git a/core/src/lib.rs b/core/src/lib.rs
index 5c4aa86523..9d6908b317 100644
--- a/core/src/lib.rs
+++ b/core/src/lib.rs
@@ -106,6 +106,12 @@ pub fn proto_packet_to_packet(p: jito_protos::proto::packet::Packet) -> Packet {
             if flags.repair {
                 packet.meta_mut().flags.insert(PacketFlags::REPAIR);
             }
+            if flags.from_staked_node {
+                packet
+                    .meta_mut()
+                    .flags
+                    .insert(PacketFlags::FROM_STAKED_NODE)
+            }
         }
     }
     packet
diff --git a/jito-protos/protos b/jito-protos/protos
index 05d210980f..b74a23ff23 160000
--- a/jito-protos/protos
+++ b/jito-protos/protos
@@ -1 +1 @@
-Subproject commit 05d210980f34a7c974d7ed1a4dbcb2ce1fca00b3
+Subproject commit b74a23ff236c0c223b1bc56daf7c5065bb585428
